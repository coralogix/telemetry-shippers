# Values file for span metrics E2E tests
# Uses default preset configuration to detect any breaking changes in the preset itself

global:
  logLevel: "info"
  hostedEndpoint: "host.docker.internal"

opentelemetry-agent:
  presets:
    spanMetrics:
      enabled: true

  config:
    exporters:
      debug:
        verbosity: detailed
      otlp/metrics:
        endpoint: "{{.Values.global.hostedEndpoint}}:4317"
        tls:
          insecure: true
      otlp/traces:
        endpoint: "{{.Values.global.hostedEndpoint}}:4321"
        tls:
          insecure: true
      otlp/logs:
        endpoint: "{{.Values.global.hostedEndpoint}}:4323"
        tls:
          insecure: true

    service:
      pipelines:
        metrics:
          exporters:
            - otlp/metrics
            - debug
        "metrics/compact":
          exporters:
            - otlp/metrics
            - debug
        "metrics/db_compact":
          exporters:
            - otlp/metrics
            - debug
        traces:
          exporters:
            - otlp/traces
            - debug
        logs/resource_catalog:
          exporters:
            - otlp/logs
